ç‰¹æ®Šè¯æ§½ï¼š
import { Sender, type SenderProps, XProvider } from '@ant-design/x';
import { Button, Flex, GetRef, message, Slider } from 'antd';
import React, { useRef, useState } from 'react';

type SlotConfig = SenderProps['slotConfig'];

const otherSlotConfig: SlotConfig = [
  { type: 'text', value: 'I want to travel to ' },
  {
    type: 'content',
    key: 'location',
    props: { defaultValue: 'Beijing', placeholder: '[Please enter the location]' },
  },
  { type: 'text', value: 'by' },
  {
    type: 'select',
    key: 'transportation',
    props: {
      defaultValue: 'airplane',
      options: ['airplane', 'high-speed rail', 'cruise ship'],
      placeholder: 'Please choose a mode of transportation',
    },
  },
  { type: 'text', value: 'with a group of 3 people, and each person has a budget of' },
  {
    type: 'custom',
    key: 'priceRange',
    props: {
      defaultValue: [3000, 6000],
    },
    customRender: (value: any, onChange: (value: any) => void, props) => {
      return (
        <div
          style={{
            width: '200px',
            paddingInline: 20,
            display: 'inline-block',
            alignItems: 'center',
          }}
        >
          <Slider
            {...props}
            max={8000}
            min={1000}
            style={{ margin: 0 }}
            range
            value={value}
            onChange={onChange}
          />
        </div>
      );
    },
    formatResult: (value: any) => {
      return `between ${value[0]} and ${value[1]} RMB.`;
    },
  },
  { type: 'text', value: 'Please' },
  { type: 'tag', key: 'tag', props: { label: '@Travel Planner ', value: 'travelTool' } },
  { type: 'text', value: 'help me create a travel itinerary,Use account ' },
  {
    type: 'input',
    key: 'account',
    props: {
      placeholder: 'Please enter a account',
    },
  },
  { type: 'text', value: '.' },
];

const altSlotConfig: SlotConfig = [
  { type: 'text', value: 'My favorite city is ' },
  {
    type: 'select',
    key: 'city',
    props: {
      defaultValue: 'London',
      options: ['London', 'Paris', 'New York'],
      placeholder: 'Select a city',
    },
  },
  { type: 'text', value: ', and I want to travel with ' },
  { type: 'input', key: 'partner', props: { placeholder: 'Enter a name' } },
];

const slotConfig = {
  otherSlotConfig,
  altSlotConfig,
};
const skillConfig = {
  value: 'travelId',
  title: 'Travel Planner',
  toolTip: {
    title: 'Travel Skill',
  },
  closable: {
    onClose: () => {
      console.log('close');
    },
  },
};
const App: React.FC = () => {
  const [slotConfigKey, setSlotConfigKey] = useState<keyof typeof slotConfig | false>(
    'otherSlotConfig',
  );
  const [messageApi, contextHolder] = message.useMessage();
  const senderRef = useRef<GetRef<typeof Sender>>(null);
  const [value, setValue] = useState<string>('');
  const [skill, setSkill] = useState<SenderProps['skill']>(skillConfig);
  const [skillValue, setSkillValue] = useState<string>('');
  const [slotValue, setSlotValue] = useState<string>('');
  return (
    <Flex vertical gap={16}>
      {contextHolder}
      {/* æ“ä½œæŒ‰é’®åŒº */}
      <Flex wrap gap={8}>
        <Button
          onClick={() => {
            senderRef.current?.clear?.();
          }}
        >
          Clear
        </Button>
        <Button
          onClick={() => {
            const val = senderRef.current?.getValue?.();
            if (val?.skill) {
              setSkillValue(val?.skill?.value);
            }
            setValue(val?.value ? val.value : 'No value');
            setSlotValue(val?.slotConfig ? JSON.stringify(val.slotConfig) : 'No value');
          }}
        >
          Get Value
        </Button>
        <Button
          onClick={() => {
            senderRef.current?.insert?.([{ type: 'text', value: ' some text A' }]);
          }}
        >
          Insert Text
        </Button>
        <Button
          onClick={() => {
            senderRef.current?.insert?.([
              { type: 'text', value: ' some text B' },
              { type: 'content', key: `partner_3_${Date.now()}`, props: { defaultValue: '11' } },
            ]);
          }}
        >
          Insert Slots
        </Button>
        <Button
          onClick={() => {
            senderRef.current?.insert?.([
              {
                type: 'content',
                key: `partner_1_${Date.now()}`,
                props: { defaultValue: 'NingNing', placeholder: 'Enter a name' },
              },
            ]);
          }}
        >
          Insert Slot
        </Button>
        <Button
          onClick={() => {
            senderRef.current?.insert?.(
              [
                {
                  type: 'input',
                  key: `partner_2_${Date.now()}`,
                  props: { placeholder: 'Enter a name' },
                },
              ],
              'start',
            );
          }}
        >
          Insert Slot Start
        </Button>
        <Button
          onClick={() => {
            senderRef.current?.insert?.(
              [
                {
                  type: 'input',
                  key: `partner_3_${Date.now()}`,
                  props: { placeholder: 'Enter a name' },
                },
              ],
              'end',
            );
          }}
        >
          Insert Slot End
        </Button>
        <Button
          onClick={() => {
            setSlotConfigKey((prev) => {
              if (prev === 'otherSlotConfig') {
                return 'altSlotConfig';
              }
              return 'otherSlotConfig';
            });
          }}
        >
          Change SlotConfig
        </Button>
        <Button
          onClick={() => {
            senderRef.current!.focus();
          }}
        >
          Focus
        </Button>
        <Button
          onClick={() => {
            senderRef.current!.focus({
              cursor: 'start',
            });
          }}
        >
          Focus at first
        </Button>
        <Button
          onClick={() => {
            senderRef.current!.focus({
              cursor: 'end',
            });
          }}
        >
          Focus at last
        </Button>
        <Button
          onClick={() => {
            senderRef.current!.focus({
              cursor: 'slot',
            });
          }}
        >
          Focus at slot
        </Button>
        <Button
          onClick={() => {
            senderRef.current!.focus({
              cursor: 'slot',
              key: 'account',
            });
          }}
        >
          Focus at slot with key
        </Button>
        <Button
          onClick={() => {
            senderRef.current!.focus({
              cursor: 'all',
            });
          }}
        >
          Focus to select all
        </Button>
        <Button
          onClick={() => {
            senderRef.current!.focus({
              preventScroll: true,
            });
          }}
        >
          Focus prevent scroll
        </Button>
        <Button
          onClick={() => {
            senderRef.current!.blur();
          }}
        >
          Blur
        </Button>
        <Button
          onClick={() => {
            setSkill({
              value: 'travelId_1',
              title: 'Travel Planner2',
              toolTip: {
                title: 'Travel Skill2',
              },
              closable: {
                onClose: () => {
                  console.log('close');
                },
              },
            });
          }}
        >
          Change Skill
        </Button>
      </Flex>
      {/* Sender è¯æ§½å¡«ç©ºç¤ºä¾‹ */}
      <XProvider
        theme={{
          components: {
            Sender: {
              fontSize: 16,
            },
          },
        }}
      >
        <Sender
          skill={skill}
          allowSpeech
          autoSize={{ minRows: 3, maxRows: 4 }}
          placeholder="Enter to send message"
          onSubmit={(value) => {
            setValue(value);
            setSlotConfigKey(false);
            messageApi.open({
              type: 'success',
              content: `Send message success: ${value}`,
            });
            senderRef.current?.clear?.();
          }}
          onChange={(value, event, slotConfig, skill) => {
            console.log(value, event, slotConfig, skill);
            if (!skill) {
              setSkill(undefined);
            }
          }}
          slotConfig={slotConfigKey ? slotConfig?.[slotConfigKey] : []}
          ref={senderRef}
        />
      </XProvider>
      <Flex vertical gap="middle">
        <div> {skillValue ? `skill:${skillValue}` : null}</div>
        <div> {value ? `value:${value}` : null}</div>
        <div> {slotValue ? `slotValue:${slotValue}` : null}</div>
      </Flex>
    </Flex>
  );
};

export default () => <App />;



mermaidå›¾è¡¨ï¼š
import { Bubble, Mermaid } from '@ant-design/x';
import XMarkdown from '@ant-design/x-markdown';
import { Button, Flex } from 'antd';
import React from 'react';
const text = `
Here are several Mermaid diagram examples 

#### 1. Flowchart (Vertical)

\`\`\` mermaid
graph TD
    A[Start] --> B{Data Valid?}
    B -->|Yes| C[Process Data]
    B -->|No| D[Error Handling]
    C --> E[Generate Report]
    D --> E
    E --> F[End]
    style A fill:#2ecc71,stroke:#27ae60
    style F fill:#e74c3c,stroke:#c0392b
\`\`\`

#### 2. Sequence Diagram

\`\`\` mermaid
sequenceDiagram
    participant Client
    participant Server
    participant Database
    
    Client->>Server: POST /api/data
    Server->>Database: INSERT record
    Database-->>Server: Success
    Server-->>Client: 201 Created
\`\`\`

#### 3. Quadrant Chart

\`\`\`mermaid
quadrantChart
    title Reach and engagement of campaigns
    x-axis Low Reach --> High Reach
    y-axis Low Engagement --> High Engagement
    quadrant-1 We should expand
    quadrant-2 Need to promote
    quadrant-3 Re-evaluate
    quadrant-4 May be improved
    Campaign A: [0.3, 0.6]
    Campaign B: [0.45, 0.23]
    Campaign C: [0.57, 0.69]
    Campaign D: [0.78, 0.34]
    Campaign E: [0.40, 0.34]
    Campaign F: [0.35, 0.78]
\`\`\`
`;
const Code = props => {
  var _a;
  const { className, children } = props;
  const lang =
    ((_a =
      className === null || className === void 0 ? void 0 : className.match(/language-(\w+)/)) ===
      null || _a === void 0
      ? void 0
      : _a[1]) || '';
  if (typeof children !== 'string') return null;
  if (lang === 'mermaid') {
    return <Mermaid>{children}</Mermaid>;
  }
  return <code>{children}</code>;
};
const App = () => {
  const [index, setIndex] = React.useState(0);
  const timer = React.useRef(null);
  const contentRef = React.useRef(null);
  React.useEffect(() => {
    if (index >= text.length) return;
    timer.current = setTimeout(() => {
      setIndex(Math.min(index + 5, text.length));
    }, 20);
    return () => {
      if (timer.current) {
        clearTimeout(timer.current);
        timer.current = null;
      }
    };
  }, [index]);
  React.useEffect(() => {
    if (contentRef.current && index > 0 && index < text.length) {
      const { scrollHeight, clientHeight } = contentRef.current;
      if (scrollHeight > clientHeight) {
        contentRef.current.scrollTo({
          top: scrollHeight,
          behavior: 'smooth',
        });
      }
    }
  }, [index]);
  return (
    <Flex vertical gap="small" style={{ height: 600, overflow: 'auto' }} ref={contentRef}>
      <Flex justify="flex-end">
        <Button onClick={() => setIndex(0)}>Re-Render</Button>
      </Flex>

      <Bubble
        content={text.slice(0, index)}
        styles={{
          content: {
            width: 700,
          },
        }}
        contentRender={content => (
          <XMarkdown components={{ code: Code }} paragraphTag="div">
            {content}
          </XMarkdown>
        )}
        variant="outlined"
      />
    </Flex>
  );
};
export default App;



æ€è€ƒè¿‡ç¨‹ï¼š

import { Bubble, Think } from '@ant-design/x';
import XMarkdown from '@ant-design/x-markdown';
import { Button, Flex } from 'antd';
import React from 'react';
const text = `
<think>Deep thinking is a systematic and structured cognitive approach that requires individuals to move beyond intuition and superficial information, delving into the essence of a problem and its underlying principles through logical analysis, multi-perspective examination, and persistent inquiry. Unlike quick reactions or heuristic judgments, deep thinking emphasizes â€‹slow thinking, actively engaging knowledge reserves, critical thinking, and creativity to uncover deeper connections and meanings.
Key characteristics of deep thinking include:
â€‹Probing the Essence: Not settling for "what it is," but continuously asking "why" and "how it works" until reaching the fundamental logic.
â€‹Multidimensional Connections: Placing the issue in a broader context and analyzing it through interdisciplinary knowledge or diverse perspectives.
â€‹Skepticism & Reflection: Challenging existing conclusions, authoritative opinions, and even personal biases, validating them through logic or evidence.
â€‹Long-term Value Focus: Prioritizing systemic consequences and sustainable impact over short-term or localized benefits.
This mode of thinking helps individuals avoid cognitive biases in complex scenarios, improve decision-making, and generate groundbreaking insights in fields such as academic research, business innovation, and social problem-solving.</think>
# Hello Deep Thinking\n Deep thinking is over.\n\n You can use the think tag to package your thoughts.
`;
const ThinkComponent = React.memo(props => {
  const [title, setTitle] = React.useState('Deep thinking...');
  const [loading, setLoading] = React.useState(true);
  const [expand, setExpand] = React.useState(true);
  React.useEffect(() => {
    if (props.streamStatus === 'done') {
      setTitle('Complete thinking');
      setLoading(false);
      setExpand(false);
    }
  }, [props.streamStatus]);
  return (
    <Think title={title} loading={loading} expanded={expand} onClick={() => setExpand(!expand)}>
      {props.children}
    </Think>
  );
});
const App = () => {
  const [index, setIndex] = React.useState(0);
  const timer = React.useRef(null);
  const contentRef = React.useRef(null);
  React.useEffect(() => {
    if (index >= text.length) return;
    timer.current = setTimeout(() => {
      setIndex(Math.min(index + 5, text.length));
    }, 20);
    return () => {
      if (timer.current) {
        clearTimeout(timer.current);
        timer.current = null;
      }
    };
  }, [index]);
  React.useEffect(() => {
    if (contentRef.current && index > 0 && index < text.length) {
      const { scrollHeight, clientHeight } = contentRef.current;
      if (scrollHeight > clientHeight) {
        contentRef.current.scrollTo({
          top: scrollHeight,
          behavior: 'smooth',
        });
      }
    }
  }, [index]);
  return (
    <Flex vertical gap="small" style={{ height: 600, overflow: 'auto' }} ref={contentRef}>
      <Flex justify="flex-end">
        <Button onClick={() => setIndex(0)}>Re-Render</Button>
      </Flex>

      <Bubble
        content={text.slice(0, index)}
        contentRender={content => (
          <XMarkdown components={{ think: ThinkComponent }} paragraphTag="div">
            {content}
          </XMarkdown>
        )}
        variant="outlined"
      />
    </Flex>
  );
};
export default App;


å›¾è¡¨ï¼š
import { Bubble } from '@ant-design/x';
import XMarkdown from '@ant-design/x-markdown';
import { Line } from '@antv/gpt-vis';
import { Button, Flex, Skeleton } from 'antd';
/* eslint-disable react/no-danger */
import React, { useEffect } from 'react';
const text = `
**GPT-Vis**, Components for GPTs, generative AI, and LLM projects. Not only UI Components. [more...](https://github.com/antvis/GPT-Vis) \n\n
Hereâ€™s a visualization of Haidilao's food delivery revenue from 2013 to 2022. You can see a steady increase over the years, with notable *growth* particularly in recent years.

<custom-line data-axis-x-title="year" data-axis-y-title="sale">[{"time":2013,"value":59.3},{"time":2014,"value":64.4},{"time":2015,"value":68.9},{"time":2016,"value":74.4},{"time":2017,"value":82.7},{"time":2018,"value":91.9},{"time":2019,"value":99.1},{"time":2020,"value":101.6},{"time":2021,"value":114.4},{"time":2022,"value":121}]</custom-line>
`;
const LineCompt = props => {
  const { children, streamstatus } = props;
  const resolvedAxisXTitle = props['data-axis-x-title'] || '';
  const resolvedAxisYTitle = props['data-axis-y-title'] || '';
  const resolvedStreamStatus = streamstatus || 'done';
  // Extract JSON from children - children can be array or string
  let jsonData = [];
  if (Array.isArray(children) && children.length > 0) {
    jsonData = children[0];
  } else if (typeof children === 'string') {
    jsonData = children;
  }
  if (resolvedStreamStatus === 'loading') {
    return <Skeleton.Image active={true} style={{ width: 901, height: 408 }} />;
  }
  try {
    const parsedData = typeof jsonData === 'string' ? JSON.parse(jsonData) : jsonData;
    return (
      <Line data={parsedData} axisXTitle={resolvedAxisXTitle} axisYTitle={resolvedAxisYTitle} />
    );
  } catch (error) {
    console.error('Failed to parse Line data:', jsonData, error);
    return <div>Error rendering chart</div>;
  }
};
const App = () => {
  const [index, setIndex] = React.useState(0);
  const [hasNextChunk, setHasNextChunk] = React.useState(true);
  const timer = React.useRef(null);
  const contentRef = React.useRef(null);
  useEffect(() => {
    if (index >= text.length) return;
    timer.current = setTimeout(() => {
      setIndex(Math.min(index + 5, text.length));
    }, 20);
    return () => {
      if (timer.current) {
        clearTimeout(timer.current);
        timer.current = null;
      }
    };
  }, [index]);
  useEffect(() => {
    if (index >= text.length) {
      setHasNextChunk(false);
    } else if (!hasNextChunk) {
      setHasNextChunk(true);
    }
  }, [index, hasNextChunk]);
  useEffect(() => {
    if (contentRef.current && index > 0 && index < text.length) {
      const { scrollHeight, clientHeight } = contentRef.current;
      if (scrollHeight > clientHeight) {
        contentRef.current.scrollTo({
          top: scrollHeight,
          behavior: 'smooth',
        });
      }
    }
  }, [index]);
  return (
    <Flex vertical gap="small" style={{ height: 600, overflow: 'auto' }} ref={contentRef}>
      <Flex justify="flex-end">
        <Button
          onClick={() => {
            setIndex(0);
            setHasNextChunk(true);
          }}
        >
          Re-Render
        </Button>
      </Flex>

      <Bubble
        content={text.slice(0, index)}
        contentRender={content => (
          <XMarkdown
            style={{ whiteSpace: 'normal' }}
            components={{ 'custom-line': LineCompt }}
            paragraphTag="div"
            streaming={{ hasNextChunk }}
          >
            {content}
          </XMarkdown>
        )}
        variant="outlined"
      />
    </Flex>
  );
};
export default App;

import { Bubble } from '@ant-design/x';
import XMarkdown from '@ant-design/x-markdown';
import { Button, Flex } from 'antd';
import React from 'react';
const text = `
**[Infographic](https://github.com/antvis/Infographic)**, An Infographic Generation and Rendering Framework, bring words to life with AI!

The advantages of an enterprise are generally analyzed from dimensions such as brand influence, technological R&D capabilities, rapid market growth, service satisfaction, comprehensive data assets, and strong innovation capabilities, which are reflected in the final performance.

\`\`\` infographic
infographic sequence-pyramid-simple
data
  title ä¼ä¸šæ•°å­—åŒ–è½¬å‹å±‚çº§
  desc ä»åŸºç¡€è®¾æ–½åˆ°æˆ˜ç•¥åˆ›æ–°çš„äº”å±‚è¿›é˜¶è·¯å¾„
  items
    - label æˆ˜ç•¥åˆ›æ–°
      desc æ•°æ®é©±åŠ¨å†³ç­–ï¼Œå¼•é¢†è¡Œä¸šå˜é©
      icon ref:search:lightbulb-on
    - label æ™ºèƒ½è¿è¥
      desc AIèµ‹èƒ½ä¸šåŠ¡ï¼Œå®ç°è‡ªåŠ¨åŒ–ç®¡ç†
      icon ref:search:robot
    - label æ•°æ®æ•´åˆ
      desc æ‰“é€šæ•°æ®å­¤å²›ï¼Œå»ºç«‹ç»Ÿä¸€å¹³å°
      icon ref:search:database-sync
    - label æµç¨‹ä¼˜åŒ–
      desc æ•°å­—åŒ–æ ¸å¿ƒä¸šåŠ¡æµç¨‹å’Œåä½œ
      icon ref:search:workflow
    - label åŸºç¡€è®¾æ–½
      desc æ„å»ºäº‘è®¡ç®—å’Œç½‘ç»œåŸºç¡€æ¶æ„
      icon ref:search:server-network
themeConfig
  palette antv
\`\`\`
`;
function ReactInfographic(props) {
  const { children } = props;
  const [isClient, setIsClient] = React.useState(false);
  const $container = React.useRef(null);
  const infographicInstance = React.useRef(null);
  React.useEffect(() => {
    setIsClient(true);
  }, []);
  React.useEffect(() => {
    if (!isClient || !$container.current) return;
    // åŠ¨æ€å¯¼å…¥ Infographic ä»¥é¿å… SSR é—®é¢˜
    import('@antv/infographic').then(({ Infographic }) => {
      var _a;
      // ç¡®ä¿ container ä¸ä¸º null
      if ($container.current) {
        infographicInstance.current = new Infographic({
          container: $container.current,
        });
        (_a = infographicInstance.current) === null || _a === void 0 ? void 0 : _a.render(children);
      }
    });
    return () => {
      var _a, _b;
      (_b = (_a = infographicInstance.current) === null || _a === void 0 ? void 0 : _a.destroy) ===
        null || _b === void 0
        ? void 0
        : _b.call(_a);
    };
  }, [isClient, children]);
  if (!isClient) {
    return <div style={{ minHeight: 400 }}>Loading infographic...</div>;
  }
  return <div ref={$container} />;
}
const Code = props => {
  var _a;
  const { className, children } = props;
  const lang =
    ((_a =
      className === null || className === void 0 ? void 0 : className.match(/language-(\w+)/)) ===
      null || _a === void 0
      ? void 0
      : _a[1]) || '';
  if (typeof children !== 'string') return null;
  if (lang === 'infographic') {
    return <ReactInfographic>{children}</ReactInfographic>;
  }
  return <code>{children}</code>;
};
const App = () => {
  const [index, setIndex] = React.useState(0);
  const timer = React.useRef(null);
  const contentRef = React.useRef(null);
  React.useEffect(() => {
    if (index >= text.length) return;
    timer.current = setTimeout(() => {
      setIndex(Math.min(index + 5, text.length));
    }, 20);
    return () => {
      if (timer.current) {
        clearTimeout(timer.current);
        timer.current = null;
      }
    };
  }, [index]);
  React.useEffect(() => {
    if (contentRef.current && index > 0 && index < text.length) {
      const { scrollHeight, clientHeight } = contentRef.current;
      if (scrollHeight > clientHeight) {
        contentRef.current.scrollTo({
          top: scrollHeight,
          behavior: 'smooth',
        });
      }
    }
  }, [index]);
  return (
    <Flex vertical gap="small" style={{ height: 800, overflow: 'auto' }} ref={contentRef}>
      <Flex justify="flex-end">
        <Button onClick={() => setIndex(0)}>Re-Render</Button>
      </Flex>

      <Bubble
        content={text.slice(0, index)}
        styles={{
          content: {
            width: 700,
          },
        }}
        contentRender={content => (
          <XMarkdown components={{ code: Code }} paragraphTag="div">
            {content}
          </XMarkdown>
        )}
        variant="outlined"
      />
    </Flex>
  );
};
export default App;


å¼•ç”¨æ¥æºï¼š
import { Bubble, Sources } from '@ant-design/x';
import XMarkdown from '@ant-design/x-markdown';
import { Button, Flex } from 'antd';
import React from 'react';
const text = `Ant Financial has a large number of enterprise-level products.<sup>1</sup> With complex scenarios, designers and developers often need to respond fast due to frequent changes in product demands and concurrent R & D workflow.<sup>2</sup> Many similar contents exist in the process. Through abstraction, we could obtain some stable and highly reusable components and pages.<sup>3</sup>`;
const SupComponent = React.memo(props => {
  const items = [
    {
      title: '1. Data source',
      key: 1,
      url: 'https://x.ant.design/components/overview',
      description:
        'Artificial Intelligence, often abbreviated as AI, is a broad branch of computer science concerned with building smart machines capable of performing tasks that typically require human intelligence.',
    },
    {
      title: '2. Data source',
      key: 2,
      url: 'https://x.ant.design/components/overview',
    },
    {
      title: '3. Data source',
      key: 3,
      url: 'https://x.ant.design/components/overview',
    },
  ];
  return (
    <Sources
      activeKey={parseInt(
        `${props === null || props === void 0 ? void 0 : props.children}` || '0',
        10,
      )}
      title={props.children}
      items={items}
      inline={true}
    />
  );
});
const App = () => {
  const [index, setIndex] = React.useState(0);
  const timer = React.useRef(null);
  const contentRef = React.useRef(null);
  React.useEffect(() => {
    if (index >= text.length) return;
    timer.current = setTimeout(() => {
      setIndex(Math.min(index + 5, text.length));
    }, 20);
    return () => {
      if (timer.current) {
        clearTimeout(timer.current);
        timer.current = null;
      }
    };
  }, [index]);
  React.useEffect(() => {
    if (contentRef.current && index > 0 && index < text.length) {
      const { scrollHeight, clientHeight } = contentRef.current;
      if (scrollHeight > clientHeight) {
        contentRef.current.scrollTo({
          top: scrollHeight,
          behavior: 'smooth',
        });
      }
    }
  }, [index]);
  return (
    <Flex vertical gap="small" style={{ height: 300, overflow: 'auto' }} ref={contentRef}>
      <Flex justify="flex-end">
        <Button onClick={() => setIndex(0)}>Re-Render</Button>
      </Flex>

      <Bubble
        content={text.slice(0, index)}
        contentRender={content => (
          <XMarkdown components={{ sup: SupComponent }} paragraphTag="div">
            {content}
          </XMarkdown>
        )}
        variant="outlined"
      />
    </Flex>
  );
};
export default App;


è‡ªå®šä¹‰ç»„ä»¶ï¼š
var __awaiter =
  (this && this.__awaiter) ||
  function (thisArg, _arguments, P, generator) {
    function adopt(value) {
      return value instanceof P
        ? value
        : new P(function (resolve) {
            resolve(value);
          });
    }
    return new (P || (P = Promise))(function (resolve, reject) {
      function fulfilled(value) {
        try {
          step(generator.next(value));
        } catch (e) {
          reject(e);
        }
      }
      function rejected(value) {
        try {
          step(generator['throw'](value));
        } catch (e) {
          reject(e);
        }
      }
      function step(result) {
        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
      }
      step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
  };
import { Bubble, Think } from '@ant-design/x';
import XMarkdown from '@ant-design/x-markdown';
import React, { useCallback, useEffect, useState } from 'react';
import '@ant-design/x-markdown/themes/light.css';
import {
  DeleteOutlined,
  DollarOutlined,
  EyeOutlined,
  PlusOutlined,
  ShoppingCartOutlined,
  UserOutlined,
} from '@ant-design/icons';
import {
  Button,
  Card,
  Flex,
  Form,
  Input,
  Modal,
  message,
  Select,
  Space,
  Statistic,
  Table,
  Tag,
} from 'antd';
const { Option } = Select;
// è‡ªå®šä¹‰ä¸šåŠ¡ç»„ä»¶ - ä»æ¨¡å‹æ•°æ®è·å–çš„é”€å”®ä»ªè¡¨æ¿
const Salesdashboard = React.memo(({ children, streamStatus }) => {
  const [salesData, setSalesData] = useState([]);
  const [totalSales, setTotalSales] = useState(0);
  const [totalOrders, setTotalOrders] = useState(0);
  const [newCustomers, setNewCustomers] = useState(0);
  useEffect(() => {
    if (children) {
      // ä»æ¨¡å‹è¿”å›çš„æ•°æ®ä¸­è§£æé”€å”®ä¿¡æ¯
      try {
        const parsedData = typeof children === 'string' ? JSON.parse(children) : children;
        if (parsedData.sales) {
          setSalesData(parsedData.sales);
        }
        if (parsedData.totalSales) {
          setTotalSales(parsedData.totalSales);
        }
        if (parsedData.totalOrders) {
          setTotalOrders(parsedData.totalOrders);
        }
        if (parsedData.newCustomers) {
          setNewCustomers(parsedData.newCustomers);
        }
      } catch (_error) {
        // å¦‚æœè§£æå¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®
        const defaultData = [
          { name: 'ç”µå­äº§å“', value: 45000, color: '#3b82f6' },
          { name: 'æœè£…', value: 32000, color: '#8b5cf6' },
          { name: 'å®¶å±…ç”¨å“', value: 28000, color: '#10b981' },
        ];
        setSalesData(defaultData);
        setTotalSales(115000);
        setTotalOrders(342);
        setNewCustomers(67);
      }
    } else {
      // é»˜è®¤æ•°æ®
      const defaultData = [
        { name: 'ç”µå­äº§å“', value: 45000, color: '#3b82f6' },
        { name: 'æœè£…', value: 32000, color: '#8b5cf6' },
        { name: 'å®¶å±…ç”¨å“', value: 28000, color: '#10b981' },
      ];
      setSalesData(defaultData);
      setTotalSales(115000);
      setTotalOrders(342);
      setNewCustomers(67);
    }
  }, [children]);
  if (streamStatus === 'loading') return;
  return (
    <div style={{ padding: '20px' }}>
      <Flex vertical gap="large">
        <Flex justify="space-between" align="center">
          é”€å”®ä»ªè¡¨æ¿ (ä»æ¨¡å‹æ•°æ®è·å–)
          <Tag color="blue">å®æ—¶æ•°æ®</Tag>
        </Flex>

        <Flex gap="middle" wrap>
          <Card style={{ flex: 1, minWidth: 200 }}>
            <Statistic
              title="æ€»é”€å”®é¢"
              value={totalSales}
              prefix={<DollarOutlined />}
              precision={2}
              valueStyle={{ color: '#3f8600' }}
            />
          </Card>
          <Card style={{ flex: 1, minWidth: 200 }}>
            <Statistic
              title="è®¢å•æ€»æ•°"
              value={totalOrders}
              prefix={<ShoppingCartOutlined />}
              valueStyle={{ color: '#1890ff' }}
            />
          </Card>
          <Card style={{ flex: 1, minWidth: 200 }}>
            <Statistic
              title="æ–°å¢å®¢æˆ·"
              value={newCustomers}
              prefix={<UserOutlined />}
              valueStyle={{ color: '#722ed1' }}
            />
          </Card>
        </Flex>

        <Flex gap="large" wrap>
          <Card title="é”€å”®åˆ†å¸ƒ" style={{ flex: 1, minWidth: 300 }}>
            <div style={{ padding: '20px' }}>
              {salesData.map((item, index) => (
                <div key={index} style={{ marginBottom: 12 }}>
                  <Flex justify="space-between" align="center">
                    <span>{item.name}</span>
                    <Tag color={item.color}>Â¥{item.value.toLocaleString()}</Tag>
                  </Flex>
                </div>
              ))}
            </div>
          </Card>

          <Card title="æ•°æ®è¯´æ˜" style={{ flex: 1, minWidth: 300 }}>
            <div style={{ padding: '20px' }}>
              <p>ğŸ¤– ä»¥ä¸Šæ•°æ®ç”±AIæ¨¡å‹å®æ—¶ç”Ÿæˆ</p>
              <p>ğŸ“Š æ•°æ®æ ¼å¼: JSONæ ¼å¼ï¼ŒåŒ…å«salesã€totalSalesã€totalOrdersã€newCustomerså­—æ®µ</p>
              <p>ğŸ’¡ ç¤ºä¾‹æ ¼å¼: salesæ•°ç»„åŒ…å«nameå’Œvalueå­—æ®µ</p>
            </div>
          </Card>
        </Flex>
      </Flex>
    </div>
  );
});
// è‡ªå®šä¹‰ä¸šåŠ¡ç»„ä»¶ - è®¢å•ç®¡ç†è¡¨æ ¼
const OrderManager = React.memo(() => {
  const [orders, setOrders] = useState([]);
  const [loading, setLoading] = useState(false);
  const [modalVisible, setModalVisible] = useState(false);
  const [editingOrder, setEditingOrder] = useState(null);
  const [form] = Form.useForm();
  const fetchOrders = useCallback(
    () =>
      __awaiter(void 0, void 0, void 0, function* () {
        setLoading(true);
        try {
          yield new Promise(resolve => setTimeout(resolve, 1000));
          const mockOrders = [
            {
              id: 'ORD001',
              customer: 'å¼ ä¸‰',
              product: 'iPhone 15',
              amount: 8999,
              status: 'completed',
              date: '2024-01-15',
              region: 'åŒ—äº¬',
            },
            {
              id: 'ORD002',
              customer: 'æå››',
              product: 'MacBook Pro',
              amount: 15999,
              status: 'processing',
              date: '2024-01-16',
              region: 'ä¸Šæµ·',
            },
            {
              id: 'ORD003',
              customer: 'ç‹äº”',
              product: 'AirPods Pro',
              amount: 1999,
              status: 'pending',
              date: '2024-01-17',
              region: 'å¹¿å·',
            },
            {
              id: 'ORD004',
              customer: 'èµµå…­',
              product: 'iPad Air',
              amount: 4799,
              status: 'completed',
              date: '2024-01-18',
              region: 'æ·±åœ³',
            },
          ];
          setOrders(mockOrders);
        } catch (_error) {
          message.error('è·å–è®¢å•å¤±è´¥');
        } finally {
          setLoading(false);
        }
      }),
    [],
  );
  useEffect(() => {
    fetchOrders();
  }, [fetchOrders]);
  const handleDelete = id =>
    __awaiter(void 0, void 0, void 0, function* () {
      try {
        yield new Promise(resolve => setTimeout(resolve, 500));
        setOrders(prev => prev.filter(order => order.id !== id));
        message.success('è®¢å•å·²åˆ é™¤');
      } catch (_error) {
        message.error('åˆ é™¤å¤±è´¥');
      }
    });
  const handleEdit = order => {
    setEditingOrder(order);
    form.setFieldsValue(order);
    setModalVisible(true);
  };
  const handleSubmit = values =>
    __awaiter(void 0, void 0, void 0, function* () {
      try {
        yield new Promise(resolve => setTimeout(resolve, 800));
        if (editingOrder) {
          setOrders(prev =>
            prev.map(order =>
              order.id === editingOrder.id
                ? Object.assign(Object.assign({}, order), values)
                : order,
            ),
          );
          message.success('è®¢å•å·²æ›´æ–°');
        } else {
          const newOrder = {
            id: `ORD${String(Date.now()).slice(-3)}`,
            customer: values.customer || '',
            product: values.product || '',
            amount: values.amount || 0,
            status: values.status || 'pending',
            date: new Date().toISOString().split('T')[0],
            region: values.region || '',
          };
          setOrders(prev => [...prev, newOrder]);
          message.success('è®¢å•å·²åˆ›å»º');
        }
        setModalVisible(false);
        form.resetFields();
        setEditingOrder(null);
      } catch (_error) {
        message.error('æ“ä½œå¤±è´¥');
      }
    });
  const columns = [
    { title: 'è®¢å•å·', dataIndex: 'id', key: 'id' },
    { title: 'å®¢æˆ·', dataIndex: 'customer', key: 'customer' },
    { title: 'äº§å“', dataIndex: 'product', key: 'product' },
    { title: 'é‡‘é¢', dataIndex: 'amount', key: 'amount', render: amount => `Â¥${amount}` },
    {
      title: 'çŠ¶æ€',
      dataIndex: 'status',
      key: 'status',
      render: status => {
        const colors = {
          pending: 'orange',
          processing: 'blue',
          completed: 'green',
          cancelled: 'red',
        };
        const labels = {
          pending: 'å¾…å¤„ç†',
          processing: 'å¤„ç†ä¸­',
          completed: 'å·²å®Œæˆ',
          cancelled: 'å·²å–æ¶ˆ',
        };
        return <Tag color={colors[status]}>{labels[status]}</Tag>;
      },
    },
    { title: 'æ—¥æœŸ', dataIndex: 'date', key: 'date' },
    { title: 'åœ°åŒº', dataIndex: 'region', key: 'region' },
    {
      title: 'æ“ä½œ',
      key: 'action',
      render: (_, record) => (
        <Space>
          <Button type="link" icon={<EyeOutlined />} onClick={() => handleEdit(record)} />
          <Button
            type="link"
            danger
            icon={<DeleteOutlined />}
            onClick={() => handleDelete(record.id)}
          />
        </Space>
      ),
    },
  ];
  return (
    <div style={{ padding: '20px' }}>
      <Flex vertical gap="middle">
        <Flex justify="space-between" align="center">
          <h2>è®¢å•ç®¡ç†</h2>
          <Button type="primary" icon={<PlusOutlined />} onClick={() => setModalVisible(true)}>
            æ–°å»ºè®¢å•
          </Button>
        </Flex>

        <Table
          columns={columns}
          dataSource={orders}
          loading={loading}
          rowKey="id"
          pagination={{ pageSize: 5 }}
        />

        <Modal
          title={editingOrder ? 'ç¼–è¾‘è®¢å•' : 'æ–°å»ºè®¢å•'}
          open={modalVisible}
          onCancel={() => {
            setModalVisible(false);
            form.resetFields();
            setEditingOrder(null);
          }}
          onOk={() => form.submit()}
        >
          <Form form={form} onFinish={handleSubmit} layout="vertical">
            <Form.Item name="customer" label="å®¢æˆ·åç§°" rules={[{ required: true }]}>
              <Input />
            </Form.Item>
            <Form.Item name="product" label="äº§å“åç§°" rules={[{ required: true }]}>
              <Input />
            </Form.Item>
            <Form.Item name="amount" label="é‡‘é¢" rules={[{ required: true }]}>
              <Input type="number" />
            </Form.Item>
            <Form.Item name="status" label="çŠ¶æ€" rules={[{ required: true }]}>
              <Select>
                <Option value="pending">å¾…å¤„ç†</Option>
                <Option value="processing">å¤„ç†ä¸­</Option>
                <Option value="completed">å·²å®Œæˆ</Option>
                <Option value="cancelled">å·²å–æ¶ˆ</Option>
              </Select>
            </Form.Item>
            <Form.Item name="region" label="åœ°åŒº" rules={[{ required: true }]}>
              <Input />
            </Form.Item>
          </Form>
        </Modal>
      </Flex>
    </div>
  );
});
// æ€è€ƒç»„ä»¶
const ThinkComponent = React.memo(props => {
  var _a;
  const [title, setTitle] = React.useState('æ­£åœ¨åˆ†æä¸šåŠ¡æ•°æ®...');
  const [loading, setLoading] = React.useState(true);
  const [expand, setExpand] = React.useState(true);
  React.useEffect(() => {
    if (props.streamStatus === 'done') {
      setTitle('ä¸šåŠ¡åˆ†æå®Œæˆ');
      setLoading(false);
      setExpand(false);
    }
  }, [props.streamStatus]);
  if (typeof props.children !== 'string') {
    return null;
  }
  return (
    <div style={{ padding: '12px 0' }}>
      <Think title={title} loading={loading} expanded={expand} onClick={() => setExpand(!expand)}>
        {(_a = props === null || props === void 0 ? void 0 : props.children) === null ||
        _a === void 0
          ? void 0
          : _a.trim()}
      </Think>
    </div>
  );
});
const text = `
<think>
åŸºäºç”¨æˆ·æä¾›çš„ä¸šåŠ¡éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„é”€å”®ç®¡ç†ç³»ç»Ÿç¤ºä¾‹ï¼Œè¯¥ç³»ç»Ÿéœ€è¦å±•ç¤ºå¦‚ä½•ä»AIæ¨¡å‹è¿”å›çš„æ•°æ®ä¸­åŠ¨æ€è·å–å’Œå±•ç¤ºä¿¡æ¯ã€‚è¿™ä¸ªç¤ºä¾‹å°†å±•ç¤ºXMarkdownå¦‚ä½•ï¼š
1. ä»æ¨¡å‹è¿”å›çš„JSONæ•°æ®ä¸­è§£æä¸šåŠ¡ä¿¡æ¯
2. ä½¿ç”¨å°å†™ç»„ä»¶æ ‡ç­¾ï¼ˆå¦‚salesdashboardï¼‰
3. å¤„ç†åŠ¨æ€æ•°æ®æ¸²æŸ“
4. å®ç°å¤æ‚çš„ä¸šåŠ¡åœºæ™¯å’Œäº¤äº’éœ€æ±‚
é€šè¿‡è¿™ç§æ–¹å¼ï¼Œç”¨æˆ·å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°XMarkdownä¸ä»…æ”¯æŒç®€å•çš„æ–‡æœ¬æ¸²æŸ“ï¼Œè¿˜èƒ½å¤„ç†åŠ¨æ€æ•°æ®é©±åŠ¨çš„å¤æ‚ä¸šåŠ¡åœºæ™¯ã€‚
</think>

### ğŸ“Š åŠ¨æ€é”€å”®ä»ªè¡¨æ¿

<salesdashboard>{"sales":[{"name":"ç”µå­äº§å“","value":52000,"color":"#3b82f6"},{"name":"æœè£…","value":38000,"color":"#8b5cf6"}],"totalSales":141000,"totalOrders":487,"newCustomers":94}</salesdashboard>

### ğŸ“‹ è®¢å•ç®¡ç†ç³»ç»Ÿ

<ordermanager />
`;
const App = () => {
  const [index, setIndex] = React.useState(0);
  const timer = React.useRef(null);
  const contentRef = React.useRef(null);
  React.useEffect(() => {
    if (index >= text.length) return;
    timer.current = setTimeout(() => {
      setIndex(Math.min(index + 5, text.length));
    }, 20);
    return () => {
      if (timer.current) {
        clearTimeout(timer.current);
        timer.current = null;
      }
    };
  }, [index]);
  React.useEffect(() => {
    if (contentRef.current && index > 0 && index < text.length) {
      const { scrollHeight, clientHeight } = contentRef.current;
      if (scrollHeight > clientHeight) {
        contentRef.current.scrollTo({
          top: scrollHeight,
          behavior: 'smooth',
        });
      }
    }
  }, [index]);
  return (
    <Flex vertical gap="small" style={{ height: 600, overflow: 'auto' }} ref={contentRef}>
      <Flex justify="flex-end">
        <Button onClick={() => setIndex(0)}>Re-Render</Button>
      </Flex>

      <Bubble
        content={text.slice(0, index)}
        contentRender={content => (
          <XMarkdown
            components={{
              think: ThinkComponent,
              salesdashboard: Salesdashboard,
              ordermanager: OrderManager,
            }}
            paragraphTag="div"
          >
            {content}
          </XMarkdown>
        )}
        variant="outlined"
      />
    </Flex>
  );
};
export default App;


latexå…¬å¼ï¼š
import { Bubble } from '@ant-design/x';
import XMarkdown from '@ant-design/x-markdown';
import Latex from '@ant-design/x-markdown/plugins/Latex';
import { Button, Flex } from 'antd';
import React from 'react';
const text = `
## è¡Œå†…å…¬å¼

åœ¨æ–‡æœ¬ä¸­åµŒå…¥æ•°å­¦å…¬å¼ï¼Œå¦‚ï¼šå‹¾è‚¡å®šç† $ a^2 + b^2 = c^2 $ï¼Œæ¬§æ‹‰å…¬å¼ $ e^{i\\pi} + 1 = 0 $ã€‚

åœ†çš„é¢ç§¯å…¬å¼æ˜¯\n $$ \n S = \\pi r^2 \n $$ï¼Œå…¶ä¸­ $ r $ æ˜¯åŠå¾„ã€‚

äºŒæ¬¡æ–¹ç¨‹ \\( ax^2 + bx + c = 0 \\) çš„è§£ä¸º \n \\[ \n x = \\frac{-b \\pm \\sqrt{b^2-4ac}}{2a} \n \\]ã€‚

## å—çº§å…¬å¼

### åŸºç¡€æ•°å­¦è¿ç®—

$$
\\begin{aligned}
a + b &= c \\\\
d - e &= f \\\\
g \\times h &= i \\\\
\\frac{j}{k} &= l
\\end{aligned}
$$

### å¹³æ–¹æ ¹å’ŒæŒ‡æ•°

$$
\\sqrt{x} = x^{\\frac{1}{2}}
$$

$$
\\sqrt[n]{x} = x^{\\frac{1}{n}}
$$

$$
e^{i\\theta} = cos + sin
$$

### åˆ†æ•°å’Œæ¯”ä¾‹

$$
\\frac{\\partial f}{\\partial x} = \\lim_{h \\to 0} \\frac{f(x+h) - f(x)}{h}
$$

$$
\\frac{a}{b} = \\frac{c}{d} \\Rightarrow ad = bc
$$

### æ±‚å’Œä¸ç§¯åˆ†

#### æ±‚å’Œå…¬å¼

$$
\\sum_{i=1}^{n} i = \\frac{n(n+1)}{2}
$$

$$
\\sum_{i=1}^{n} i^2 = \\frac{n(n+1)(2n+1)}{6}
$$

#### ç§¯åˆ†å…¬å¼

$$
\\int_a^b f(x) dx = F(b) - F(a)
$$

$$
\\int_{-\\infty}^{+\\infty} e^{-x^2} dx = \\sqrt{\\pi}
$$

$$
\\int_0^{\\pi} \\sin x dx = 2
$$

### å¾®åˆ†æ–¹ç¨‹

$$
\\frac{dy}{dx} = ky \\Rightarrow y = Ce^{kx}
$$

$$
\\frac{d^2y}{dx^2} + \\omega^2 y = 0 \\Rightarrow y = A\\cos(\\omega x) + B\\sin(\\omega x)
$$

### çŸ©é˜µè¿ç®—

$$
\\begin{pmatrix}
a & b \\\\
c & d
\\end{pmatrix}
\\begin{pmatrix}
x \\\\
y
\\end{pmatrix}
=
\\begin{pmatrix}
ax + by \\\\
cx + dy
\\end{pmatrix}
$$

è¡Œåˆ—å¼ï¼š

$$
\\det\\begin{pmatrix}
a & b \\\\
c & d
\\end{pmatrix} = ad - bc
$$

### ç»Ÿè®¡å­¦å…¬å¼

#### æ­£æ€åˆ†å¸ƒ

$$
f(x) = \\frac{1}{\\sigma\\sqrt{2\\pi}} e^{-\\frac{(x-\\mu)^2}{2\\sigma^2}}
$$

#### è´å¶æ–¯å®šç†

$$
P(A|B) = \\frac{P(B|A) \\cdot P(A)}{P(B)}
$$

#### æ ‡å‡†å·®

$$
\\sigma = \\sqrt{\\frac{1}{N}\\sum_{i=1}^{N}(x_i - \\mu)^2}
$$

### ä¸‰è§’å‡½æ•°

$$
\\sin^2\\theta + \\cos^2\\theta = 1
$$

$$
\\tan\\theta = \\frac{\\sin\\theta}{\\cos\\theta}
$$

$$
e^{i\\theta} = \\cos\\theta + i\\sin\\theta
$$

### çº§æ•°å±•å¼€

#### æ³°å‹’çº§æ•°

$$
f(x) = \\sum_{n=0}^{\\infty} \\frac{f^{(n)}(a)}{n!}(x-a)^n
$$

#### æŒ‡æ•°å‡½æ•°å±•å¼€

$$
e^x = \\sum_{n=0}^{\\infty} \\frac{x^n}{n!} = 1 + x + \\frac{x^2}{2!} + \\frac{x^3}{3!} + \\cdots
$$

#### æ­£å¼¦å‡½æ•°å±•å¼€

$$
\\sin x = \\sum_{n=0}^{\\infty} \\frac{(-1)^n x^{2n+1}}{(2n+1)!} = x - \\frac{x^3}{3!} + \\frac{x^5}{5!} - \\cdots
$$

### å¤æ•°è¿ç®—

å¤æ•°çš„ä¸€èˆ¬å½¢å¼ï¼š $ z = a + bi $

å¤æ•°çš„æ¨¡ï¼š $ |z| = \\sqrt{a^2 + b^2} $

å¤æ•°çš„ä¹˜æ³•ï¼š

$$
(a + bi)(c + di) = (ac - bd) + (ad + bc)i
$$

å¾·æ‘©å¼—å®šç†ï¼š

$$
(\\cos\\theta + i\\sin\\theta)^n = \\cos(n\\theta) + i\\sin(n\\theta)
$$

### æé™

$$
\\lim_{x \\to 0} \\frac{\\sin x}{x} = 1
$$

$$
\\lim_{x \\to \\infty} \\left(1 + \\frac{1}{x}\\right)^x = e
$$

$$
\\lim_{n \\to \\infty} \\sqrt[n]{n} = 1
$$

### ç»„åˆæ•°å­¦

æ’åˆ—æ•°ï¼š $ P(n,r) = \\frac{n!}{(n-r)!} $

ç»„åˆæ•°ï¼š $ C(n,r) = \\binom{n}{r} = \\frac{n!}{r!(n-r)!} $

äºŒé¡¹å¼å®šç†ï¼š

$$
(x + y)^n = \\sum_{k=0}^{n} \\binom{n}{k} x^{n-k} y^k
$$

### å‘é‡è¿ç®—

å‘é‡çš„ç‚¹ç§¯ï¼š $ \\vec{a} \\cdot \\vec{b} = |\\vec{a}||\\vec{b}|\\cos\\theta $

å‘é‡çš„å‰ç§¯ï¼š $ \\vec{a} \\times \\vec{b} = |\\vec{a}||\\vec{b}|\\sin\\theta \\vec{n} $

ä¸‰ç»´å‘é‡çš„å‰ç§¯ï¼š

$$
\\vec{a} \\times \\vec{b} = \\begin{vmatrix}
\\vec{i} & \\vec{j} & \\vec{k} \\\\
a_1 & a_2 & a_3 \\\\
b_1 & b_2 & b_3
\\end{vmatrix}
$$


### æ”¯æŒçš„è¯­æ³•æ ¼å¼

æœ¬ç¤ºä¾‹æ”¯æŒä»¥ä¸‹ LaTeX è¯­æ³•æ ¼å¼ï¼š

#### è¡Œå†…å…¬å¼
- ä½¿ç”¨å•ä¸ª $ åŒ…å›´ï¼š$E=mc^2$
- ä½¿ç”¨ ( ) åŒ…å›´ï¼š(a^2+b^2=c^2)
- ä½¿ç”¨ä¸¤ä¸ª $ åŒ…å›´å¹¶å¸¦æœ‰ \`\n\`ï¼š$\n E=mc^2 \n$
- ä½¿ç”¨ [ ] åŒ…å›´ï¼š[ \n a^2+b^2=c^2 \n ]
- ä½¿ç”¨ $$\n\n$$ è¯­æ³•ï¼š$$
E=mc^2
$$
- ä½¿ç”¨ [ \n ] è¯­æ³•ï¼š[
E=mc^2
]

#### å—çº§å…¬å¼
- ä½¿ç”¨åŒ $$ åŒ…å›´ï¼š
$$
int_a^b f(x)dx = F(b) - F(a)
$$
- ä½¿ç”¨ [ ] åŒ…å›´ï¼š
[
sum_{i=1}^n i = \frac{n(n+1)}{2}
]

> **æ³¨æ„**ï¼šLaTeX å…¬å¼çš„æ¸²æŸ“ä¾èµ–äº KaTeX åº“ï¼Œç¡®ä¿å·²æ­£ç¡®é…ç½®ç›¸å…³ä¾èµ–ã€‚
`;
const App = () => {
  const [index, setIndex] = React.useState(0);
  const timer = React.useRef(null);
  const contentRef = React.useRef(null);
  React.useEffect(() => {
    if (index >= text.length) return;
    timer.current = setTimeout(() => {
      setIndex(Math.min(index + 5, text.length));
    }, 20);
    return () => {
      if (timer.current) {
        clearTimeout(timer.current);
        timer.current = null;
      }
    };
  }, [index]);
  React.useEffect(() => {
    if (contentRef.current && index > 0 && index < text.length) {
      const { scrollHeight, clientHeight } = contentRef.current;
      if (scrollHeight > clientHeight) {
        contentRef.current.scrollTo({
          top: scrollHeight,
          behavior: 'smooth',
        });
      }
    }
  }, [index]);
  return (
    <Flex vertical gap="small" style={{ height: 600, overflow: 'auto' }} ref={contentRef}>
      <Flex justify="flex-end">
        <Button onClick={() => setIndex(0)}>Re-Render</Button>
      </Flex>

      <Bubble
        content={text.slice(0, index)}
        contentRender={content => (
          <XMarkdown config={{ extensions: Latex() }} paragraphTag="div">
            {content}
          </XMarkdown>
        )}
        variant="outlined"
      />
    </Flex>
  );
};
export default App;


ä¼šè¯ç®¡ç†ï¼š
var __awaiter =
  (this && this.__awaiter) ||
  function (thisArg, _arguments, P, generator) {
    function adopt(value) {
      return value instanceof P
        ? value
        : new P(function (resolve) {
            resolve(value);
          });
    }
    return new (P || (P = Promise))(function (resolve, reject) {
      function fulfilled(value) {
        try {
          step(generator.next(value));
        } catch (e) {
          reject(e);
        }
      }
      function rejected(value) {
        try {
          step(generator['throw'](value));
        } catch (e) {
          reject(e);
        }
      }
      function step(result) {
        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
      }
      step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
  };
import { Bubble, Conversations, Sender } from '@ant-design/x';
import { DeepSeekChatProvider, useXChat, useXConversations, XRequest } from '@ant-design/x-sdk';
import { Flex, theme } from 'antd';
import React, { useEffect, useRef } from 'react';
const useLocale = () => {
  const isCN = typeof location !== 'undefined' ? location.pathname.endsWith('-cn') : false;
  return {
    conversationItem1: isCN ? 'ä¼šè¯é¡¹ç›® 1' : 'Conversation Item 1',
    conversationItem2: isCN ? 'ä¼šè¯é¡¹ç›® 2' : 'Conversation Item 2',
    conversationItem3: isCN
      ? 'ä¼šè¯é¡¹ç›® 3ï¼Œä½ å¯ä»¥ç‚¹å‡»æˆ‘ï¼'
      : "This's Conversation Item 3, you can click me!",
    conversationItem4: isCN ? 'ä¼šè¯é¡¹ç›® 4' : 'Conversation Item 4',
    thinking: isCN ? 'æ€è€ƒä¸­' : 'Thinking',
    requestAborted: isCN ? 'è¯·æ±‚å·²ä¸­æ­¢' : 'Request aborted',
    somethingWrong: isCN ? 'å‡ºäº†ç‚¹é—®é¢˜' : 'Something went wrong',
  };
};
const App = () => {
  const locale = useLocale();
  const { token } = theme.useToken();
  const items = [
    {
      key: 'item2_1',
      label: locale.conversationItem1,
    },
    {
      key: 'item2_2',
      label: locale.conversationItem2,
    },
    {
      key: 'item2_3',
      label: locale.conversationItem3,
    },
    {
      key: 'item2_4',
      label: locale.conversationItem4,
      disabled: true, // ç¦ç”¨æ­¤é¡¹ç›®ï¼Œç”¨æˆ·æ— æ³•ç‚¹å‡»
    },
  ];
  // æä¾›è€…ç¼“å­˜ï¼šä¸ºæ¯ä¸ªä¼šè¯ç¼“å­˜ç‹¬ç«‹çš„èŠå¤©æä¾›è€…å®ä¾‹
  // Provider cache: cache independent chat provider instances for each conversation
  const providerCaches = new Map();
  // æä¾›è€…å·¥å‚ï¼šæ ¹æ®ä¼šè¯keyåˆ›å»ºæˆ–è·å–å¯¹åº”çš„èŠå¤©æä¾›è€…
  // Provider factory: create or get corresponding chat provider based on conversation key
  const providerFactory = conversationKey => {
    if (!providerCaches.get(conversationKey)) {
      providerCaches.set(
        conversationKey,
        new DeepSeekChatProvider({
          request: XRequest('https://api.x.ant.design/api/big_model_glm-4.5-flash', {
            manual: true,
            params: {
              thinking: {
                type: 'disabled',
              },
              stream: true,
              model: 'glm-4.5-flash',
            },
          }),
        }),
      );
    }
    return providerCaches.get(conversationKey);
  };
  // ä¼šè¯ç®¡ç†ï¼šä½¿ç”¨ä¼šè¯é’©å­ç®¡ç†ä¼šè¯åˆ—è¡¨å’Œæ¿€æ´»çŠ¶æ€
  // Conversation management: use conversation hook to manage conversation list and active state
  const { conversations, activeConversationKey, setActiveConversationKey } = useXConversations({
    defaultConversations: items,
    defaultActiveConversationKey: items[0].key,
  });
  const senderRef = useRef(null);
  const style = {
    width: 256,
    background: token.colorBgContainer,
    borderRadius: token.borderRadius,
  };
  // è·å–å†å²æ¶ˆæ¯åˆ—è¡¨ï¼šä»æœåŠ¡å™¨åŠ è½½å†å²èŠå¤©è®°å½•
  // Get history message list: load historical chat records from server
  const getHistoryMessageList = _a =>
    __awaiter(void 0, [_a], void 0, function* ({ conversationKey }) {
      try {
        const response = yield fetch(
          `https://api.x.ant.design/api/history_messages?isZH_CN=${typeof location !== 'undefined' && location.pathname.endsWith('-cn')}&sessionId=${conversationKey}`,
          {
            method: 'GET',
          },
        );
        const responseJson = yield response.json();
        if (responseJson === null || responseJson === void 0 ? void 0 : responseJson.success) {
          return (
            (responseJson === null || responseJson === void 0 ? void 0 : responseJson.data) || []
          );
        }
      } catch (error) {
        // ç½‘ç»œè¯·æ±‚å¤±è´¥æ—¶è¿”å›ç©ºæ•°ç»„
        // Return empty array when network request fails
        console.warn('Failed to load history messages:', error);
      }
      return [];
    });
  // èŠå¤©ç®¡ç†ï¼šä½¿ç”¨èŠå¤©é’©å­ç®¡ç†æ¶ˆæ¯å’Œè¯·æ±‚
  // Chat management: use chat hook to manage messages and requests
  const { onRequest, messages, isDefaultMessagesRequesting, isRequesting, abort } = useXChat({
    provider: providerFactory(activeConversationKey), // æ¯ä¸ªä¼šè¯éƒ½æœ‰ç‹¬ç«‹çš„æä¾›è€…
    conversationKey: activeConversationKey,
    defaultMessages: getHistoryMessageList,
    requestPlaceholder: () => {
      return {
        content: locale.thinking,
        role: 'assistant',
      };
    },
    requestFallback: (_, { error, errorInfo, messageInfo }) => {
      var _a, _b;
      // è¯·æ±‚å¤±è´¥å¤„ç†ï¼šåŒºåˆ†ä¸­æ­¢é”™è¯¯å’Œå…¶ä»–é”™è¯¯
      // Request failure handling: distinguish between abort error and other errors
      if (error.name === 'AbortError') {
        return {
          content:
            ((_a =
              messageInfo === null || messageInfo === void 0 ? void 0 : messageInfo.message) ===
              null || _a === void 0
              ? void 0
              : _a.content) || locale.requestAborted,
          role: 'assistant',
        };
      }
      return {
        content:
          ((_b = errorInfo === null || errorInfo === void 0 ? void 0 : errorInfo.error) === null ||
          _b === void 0
            ? void 0
            : _b.message) || locale.somethingWrong,
        role: 'assistant',
      };
    },
  });
  useEffect(() => {
    var _a;
    (_a = senderRef.current) === null || _a === void 0 ? void 0 : _a.clear();
  }, [activeConversationKey]);
  return (
    <Flex gap="small" align="flex-start">
      {/* ä¼šè¯åˆ—è¡¨ï¼šå·¦ä¾§æ˜¾ç¤ºå¯ç‚¹å‡»çš„ä¼šè¯é¡¹ç›® */}
      {/* Conversation list: display clickable conversation items on the left */}
      <Conversations
        items={conversations}
        activeKey={activeConversationKey}
        style={style}
        onActiveChange={setActiveConversationKey}
      />

      {/* èŠå¤©åŒºåŸŸï¼šå³ä¾§æ˜¾ç¤ºå½“å‰ä¼šè¯çš„èŠå¤©å†…å®¹ */}
      {/* Chat area: display chat content for current conversation on the right */}
      <Flex style={{ width: 500 }} vertical gap="small" align="flex-start">
        <div style={{ width: '100%', height: 350, display: 'flex', flexDirection: 'column' }}>
          <Bubble.List
            items={
              messages === null || messages === void 0
                ? void 0
                : messages.map(i =>
                    Object.assign(Object.assign({}, i.message), {
                      key: i.id,
                      status: i.status,
                      loading: i.status === 'loading',
                      extraInfo: i.extraInfo,
                    }),
                  )
            }
            styles={{
              bubble: {
                maxWidth: 840,
              },
            }}
            role={{
              assistant: {
                placement: 'start',
              },
              user: { placement: 'end' },
            }}
          />
        </div>

        {/* å‘é€å™¨ï¼šç”¨æˆ·è¾“å…¥åŒºåŸŸï¼Œæ”¯æŒå‘é€æ¶ˆæ¯å’Œä¸­æ­¢è¯·æ±‚ */}
        {/* Sender: user input area, supports sending messages and aborting requests */}
        <Sender
          disabled={isDefaultMessagesRequesting}
          ref={senderRef}
          onSubmit={val => {
            var _a;
            if (!val) return;
            onRequest({
              messages: [{ role: 'user', content: val }],
            });
            (_a = senderRef.current) === null || _a === void 0 ? void 0 : _a.clear();
          }}
          onCancel={() => {
            abort();
          }}
          loading={isRequesting}
        />
      </Flex>
    </Flex>
  );
};
export default App;


æ€ç»´é“¾å’Œå·¥å…·è°ƒç”¨é“¾ï¼š
import { CodeOutlined, EditOutlined, HeartTwoTone, SmileTwoTone } from '@ant-design/icons';
import { Think, ThoughtChain } from '@ant-design/x';
import { Button, Card, Flex, Typography } from 'antd';
import React from 'react';
const { Text } = Typography;
const items = [
  {
    title: 'Create Task',
    description: 'description',
    icon: <HeartTwoTone twoToneColor="#eb2f96" />,
    footer: <Button block>Thought Chain Item Footer</Button>,
    content: (
      <Flex gap="small" vertical>
        <Think title="Thinking Process">
          {`1. Analyze task, understand task workflow\n2. Task creation, files needed for task\n3. Task execution, using new component`}
        </Think>
        <Text type="secondary">Creating folder for new component</Text>
        <ThoughtChain.Item
          variant="solid"
          icon={<CodeOutlined />}
          title="Executing command"
          description="mkdir -p component"
        />
        <Text type="secondary">Creating files needed for new component</Text>
        <ThoughtChain.Item
          variant="solid"
          icon={<EditOutlined />}
          title="Creating file"
          description="component/index.tsx"
        />
        <Text type="secondary">Creating Chinese documentation file for new component</Text>
        <ThoughtChain.Item
          variant="solid"
          icon={<EditOutlined />}
          title="Continue creating file"
          description="component/index.zh-CN.md"
        />
        <Text type="secondary">Creating English description file for new component</Text>
        <ThoughtChain.Item
          variant="solid"
          icon={<EditOutlined />}
          title="Continue creating file"
          description="component/index.en-US.md"
        />
      </Flex>
    ),
  },
  {
    key: 'check_task',
    title: 'Check Task Execution Steps Completion',
    icon: <SmileTwoTone />,
    collapsible: true,
    description: 'Verify the overall task execution logic and feasibility',
    content: (
      <Flex gap="small" vertical>
        <ThoughtChain.Item
          variant="solid"
          status="success"
          title="Folder creation completed"
          description="component"
        />
        <ThoughtChain.Item
          variant="solid"
          status="success"
          title="File creation completed"
          description="component/index.tsx"
        />
        <ThoughtChain.Item
          variant="solid"
          status="success"
          title="File creation completed"
          description="component/index.zh-CN.md"
        />
        <ThoughtChain.Item
          variant="solid"
          status="success"
          title="File creation completed"
          description="component/index.en-US.md"
        />
      </Flex>
    ),
  },
  {
    key: 'used_task',
    title: 'Checking Task Execution Steps',
    description: 'Verify the overall task execution logic and feasibility',
    content: (
      <Flex gap="small" vertical>
        <ThoughtChain.Item
          variant="solid"
          status="success"
          title="Folder creation completed"
          description="component"
        />
        <ThoughtChain.Item
          variant="solid"
          status="success"
          title="File creation completed"
          description="component/index.tsx"
        />
        <ThoughtChain.Item
          variant="solid"
          status="success"
          title="File creation completed"
          description="component/index.zh-CN.md"
        />
        <ThoughtChain.Item
          variant="solid"
          status="success"
          title="File creation completed"
          description="component/index.en-US.md"
        />
      </Flex>
    ),
    status: 'error',
  },
];
const App = () => {
  return (
    <Card style={{ width: 500 }}>
      <ThoughtChain items={items} line="dashed" />
    </Card>
  );
};
export default App;



æç¤ºè¯é›†ï¼š
import {
  BulbOutlined,
  InfoCircleOutlined,
  RocketOutlined,
  SmileOutlined,
  WarningOutlined,
} from '@ant-design/icons';
import { Prompts } from '@ant-design/x';
import { App } from 'antd';
import React from 'react';
const items = [
  {
    key: '1',
    icon: <BulbOutlined style={{ color: '#FFD700' }} />,
    label: 'Ignite Your Creativity',
    description: 'Got any sparks for a new project?',
  },
  {
    key: '2',
    icon: <InfoCircleOutlined style={{ color: '#1890FF' }} />,
    label: 'Uncover Background Info',
    description: 'Help me understand the background of this topic.',
  },
  {
    key: '3',
    icon: <RocketOutlined style={{ color: '#722ED1' }} />,
    label: 'Efficiency Boost Battle',
    description: 'How can I work faster and better?',
  },
  {
    key: '4',
    icon: <SmileOutlined style={{ color: '#52C41A' }} />,
    label: 'Tell me a Joke',
    description: 'Why do not ants get sick? Because they have tiny ant-bodies!',
  },
  {
    key: '5',
    icon: <WarningOutlined style={{ color: '#FF4D4F' }} />,
    label: 'Common Issue Solutions',
    description: 'How to solve common issues? Share some tips!',
  },
];
const Demo = () => {
  const { message } = App.useApp();
  return (
    <Prompts
      title="âœ¨ Inspirational Sparks and Marvelous Tips"
      items={items}
      onItemClick={info => {
        message.success(`You clicked a prompt: ${info.data.label}`);
      }}
    />
  );
};
export default () => (
  <App>
    <Demo />
  </App>
);


è¿›åº¦æ¡ï¼š
import React from 'react';
import { Flex, Progress } from 'antd';
const App = () => (
  <Flex vertical gap="small" style={{ width: 180 }}>
    <Progress percent={30} size="small" />
    <Progress percent={50} size="small" status="active" />
    <Progress percent={70} size="small" status="exception" />
    <Progress percent={100} size="small" />
  </Flex>
);
export default App;