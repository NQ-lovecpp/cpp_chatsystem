@import "tailwindcss";

/* ========================================
   主题系统 - 支持亮色/暗色 + 自定义主色调
   ======================================== */

:root {
  /* 主色调 - 可通过 JS 动态修改 */
  --primary-h: 200;  /* 色相 */
  --primary-s: 80%;  /* 饱和度 */
  --primary-l: 24%;  /* 亮度 */
  
  /* 计算衍生色 */
  --color-primary: hsl(var(--primary-h), var(--primary-s), var(--primary-l));
  --color-primary-light: hsl(var(--primary-h), 50%, 96%);
  --color-primary-dark: hsl(var(--primary-h), var(--primary-s), 18%);
  --color-primary-hover: hsl(var(--primary-h), var(--primary-s), 20%);
  
  /* 亮色主题 - 柔和配色 */
  --color-background: #f8f9fb;
  --color-surface: #f0f2f5;
  --color-surface-elevated: #ffffff;
  --color-text: #1a202c;
  --color-text-secondary: #4a5568;
  --color-text-muted: #718096;
  --color-border: #e2e8f0;
  --color-border-light: #edf2f7;
  
  /* 消息气泡 */
  --color-bubble-self: var(--color-primary);
  --color-bubble-self-text: #FFFFFF;
  --color-bubble-other: #FFFFFF;
  --color-bubble-other-text: #1a202c;
  
  /* 状态色 */
  --color-success: #10B981;
  --color-warning: #F59E0B;
  --color-error: #EF4444;
  --color-info: #3B82F6;
  
  /* 阴影 - 更柔和的凸出效果 */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.03), 0 1px 3px 0 rgb(0 0 0 / 0.02);
  --shadow-md: 0 2px 4px -1px rgb(0 0 0 / 0.06), 0 4px 6px -1px rgb(0 0 0 / 0.04);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.06), 0 4px 6px -2px rgb(0 0 0 / 0.03);
  --shadow-elevated: 0 1px 3px 0 rgb(0 0 0 / 0.08), 0 1px 2px -1px rgb(0 0 0 / 0.04);
  
  /* 圆角 */
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;
  --radius-2xl: 1.5rem;
  --radius-full: 9999px;
  
  /* 过渡 */
  --transition-fast: 150ms;
  --transition-normal: 200ms;
  --transition-slow: 300ms;
}

/* 暗色主题 - 优化字体对比度 */
[data-theme="dark"] {
  --color-primary-light: hsl(var(--primary-h), 50%, 15%);
  --color-primary-hover: hsl(var(--primary-h), var(--primary-s), 40%);
  
  /* 背景层次更分明 */
  --color-background: #09090b;
  --color-surface: #18181b;
  --color-surface-elevated: #27272a;
  
  /* 文字对比度更高 */
  --color-text: #fafafa;
  --color-text-secondary: #d4d4d8;
  --color-text-muted: #a1a1aa;
  
  /* 边框更明显 */
  --color-border: #3f3f46;
  --color-border-light: #27272a;
  
  /* 消息气泡 - 深色模式适配 */
  --color-bubble-self: var(--color-primary);
  --color-bubble-self-text: #ffffff;
  --color-bubble-other: #27272a;
  --color-bubble-other-text: #fafafa;
  
  /* 输入框 */
  --color-input-bg: #27272a;
  --color-input-border: #52525b;
  
  /* 阴影加深 */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.5);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.6), 0 2px 4px -2px rgb(0 0 0 / 0.5);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.7), 0 4px 6px -4px rgb(0 0 0 / 0.6);
}

/* 深色模式输入框默认值 */
:root {
  --color-input-bg: var(--color-surface);
  --color-input-border: var(--color-border);
}

/* 预设主题色 */
[data-color="ocean"] { --primary-h: 200; --primary-s: 80%; --primary-l: 24%; }
[data-color="emerald"] { --primary-h: 160; --primary-s: 84%; --primary-l: 39%; }
[data-color="violet"] { --primary-h: 271; --primary-s: 81%; --primary-l: 56%; }
[data-color="rose"] { --primary-h: 350; --primary-s: 89%; --primary-l: 60%; }
[data-color="amber"] { --primary-h: 38; --primary-s: 92%; --primary-l: 50%; }
[data-color="slate"] { --primary-h: 215; --primary-s: 16%; --primary-l: 47%; }

/* ========================================
   基础样式
   ======================================== */

body {
  font-family: 'Inter', 'Noto Sans SC', 'PingFang SC', 'Microsoft YaHei', system-ui, sans-serif;
  background-color: var(--color-background);
  color: var(--color-text);
  margin: 0;
  padding: 0;
  transition: background-color var(--transition-normal), color var(--transition-normal);
}

/* 滚动条样式 */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: var(--color-text-muted);
  border-radius: var(--radius-full);
  opacity: 0.5;
}
::-webkit-scrollbar-thumb:hover {
  background: var(--color-text-secondary);
}

/* 选择文本颜色 */
::selection {
  background: var(--color-primary);
  color: white;
}

/* ========================================
   工具类 - 浸泡式UI效果
   ======================================== */

/* 卡片浮起效果 */
.card-elevated {
  background: var(--color-surface-elevated);
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-elevated);
  transition: all var(--transition-normal);
}

.card-elevated:hover {
  box-shadow: var(--shadow-md);
  border-color: var(--color-border-light);
  transform: translateY(-1px);
}

/* 柔和的分隔线 */
.divider-soft {
  border-color: var(--color-border-light);
  opacity: 0.6;
}

/* 微妙的内阴影效果（凹陷感） */
.inset-soft {
  box-shadow: inset 0 1px 3px 0 rgb(0 0 0 / 0.05);
}

/* 颜色 */
.text-primary { color: var(--color-primary); }
.bg-primary { background-color: var(--color-primary); }
.bg-primary-light { background-color: var(--color-primary-light); }
.bg-surface { background-color: var(--color-surface); }
.bg-surface-elevated { background-color: var(--color-surface-elevated); }
.border-default { border-color: var(--color-border); }
.text-secondary { color: var(--color-text-secondary); }
.text-muted { color: var(--color-text-muted); }

/* 兼容旧代码 */
.text-accent { color: var(--color-primary); }
.bg-accent { background-color: var(--color-primary); }
.bg-accent-light { background-color: var(--color-primary-light); }
.border-light { border-color: var(--color-border); }

/* 玻璃效果 */
.glass {
  background: color-mix(in srgb, var(--color-surface-elevated) 80%, transparent);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

/* 焦点样式 */
.focus-ring:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* ========================================
   动画关键帧
   ======================================== */

@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slide-up {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slide-down {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes scale-in {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes pulse-soft {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

.animate-fade-in { animation: fade-in var(--transition-normal) ease-out; }
.animate-slide-up { animation: slide-up var(--transition-normal) ease-out; }
.animate-slide-down { animation: slide-down var(--transition-normal) ease-out; }
.animate-scale-in { animation: scale-in var(--transition-normal) ease-out; }
.animate-pulse-soft { animation: pulse-soft 2s ease-in-out infinite; }

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}
.animate-blink { animation: blink 1s infinite; }

/* ========================================
   Ant Design 暗色模式覆盖
   ======================================== */

[data-theme="dark"] .ant-card {
  background: var(--color-surface-elevated);
  border-color: var(--color-border);
  color: var(--color-text);
}

[data-theme="dark"] .ant-input {
  background: var(--color-surface);
  border-color: var(--color-border);
  color: var(--color-text);
}

[data-theme="dark"] .ant-input::placeholder {
  color: var(--color-text-muted);
}

[data-theme="dark"] .ant-btn-default {
  background: var(--color-surface);
  border-color: var(--color-border);
  color: var(--color-text);
}

[data-theme="dark"] .ant-btn-default:hover {
  border-color: var(--color-primary);
  color: var(--color-primary);
}

[data-theme="dark"] .ant-empty-description {
  color: var(--color-text-muted);
}

[data-theme="dark"] .ant-tag {
  border-color: var(--color-border);
}

[data-theme="dark"] .ant-progress-text {
  color: var(--color-text-secondary);
}

[data-theme="dark"] .ant-alert {
  border-color: var(--color-border);
}

[data-theme="dark"] .ant-collapse {
  background: var(--color-surface);
  border-color: var(--color-border);
}

[data-theme="dark"] .ant-collapse-header {
  color: var(--color-text) !important;
}

[data-theme="dark"] .ant-modal-content {
  background: var(--color-surface-elevated);
  color: var(--color-text);
}

[data-theme="dark"] .ant-modal-header {
  background: var(--color-surface-elevated);
}

[data-theme="dark"] .ant-modal-title {
  color: var(--color-text);
}

[data-theme="dark"] .ant-typography {
  color: var(--color-text);
}

[data-theme="dark"] .ant-badge-status-text {
  color: var(--color-text-secondary);
}
